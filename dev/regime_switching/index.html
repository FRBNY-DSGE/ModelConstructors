<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Regime-Switching Parameters · ModelConstructors.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ModelConstructors.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../model_design/">Model Design</a></li><li><a class="tocitem" href="../example_model/">Creating Models</a></li><li><a class="tocitem" href="../implementation_details/">Implementation Details</a></li><li class="is-active"><a class="tocitem" href>Regime-Switching Parameters</a><ul class="internal"><li><a class="tocitem" href="#Regime-Switching-Interface-1"><span>Regime-Switching Interface</span></a></li><li><a class="tocitem" href="#Tutorial-1"><span>Tutorial</span></a></li></ul></li><li><a class="tocitem" href="../contributing/">Contributing to ModelConstructors.jl</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Regime-Switching Parameters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Regime-Switching Parameters</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/FRBNY-DSGE/ModelConstructors.jl/blob/master/docs/src/regime_switching.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Regime-Switching-Parameters-1"><a class="docs-heading-anchor" href="#Regime-Switching-Parameters-1">Regime-Switching Parameters</a><a class="docs-heading-anchor-permalink" href="#Regime-Switching-Parameters-1" title="Permalink"></a></h1><p>Users may want certain parameters to regime-switch or otherwise change values over time but maintain the same key rather than labeling parameters as, for example, <code>a1</code>, <code>a2</code>, etc. We provide an interface that allows the user to, in principle, make nearly every feature of a <code>Parameter</code> type regime-switching.</p><p>Every <code>Parameter</code> type we have implemented includes a <code>regimes</code> field, which is a dictionary of dictionaries. The keys of <code>p.regimes</code> are the names of the other fields of a parameter, e.g. <code>value</code>, and <code>p.regimes[:value]</code> points to an <code>OrderedDict</code> mapping regime numbers to values. Note that the types of the values of these <code>OrderedDict</code>s are not necessarily <code>Float64</code>. For example, <code>p.regimes[:valuebounds]</code> will point to an <code>OrderedDict{Int, Tuple{S, S}} where {S &lt;: Real}</code>. Note that, because we use <code>OrderedDict</code>s, <em>the user must insert the parameter regimes in a linear order</em>. We have not yet implemented a sorting function nor any checks that regimes are sorted in the correct order.</p><p>After using functions we have written to easily update these dictionaries, the user can toggle between different regimes using <code>toggle_regime!</code>. Under the hood, <code>toggle_regime!</code> will overwrite the fields of the parameter <code>p</code> with the values for regime <code>i</code> that are held in <code>p.regimes</code>. For this reason, <em>users need to start with regime 1 when specifying regimes</em>.</p><h2 id="Regime-Switching-Interface-1"><a class="docs-heading-anchor" href="#Regime-Switching-Interface-1">Regime-Switching Interface</a><a class="docs-heading-anchor-permalink" href="#Regime-Switching-Interface-1" title="Permalink"></a></h2><h2 id="Tutorial-1"><a class="docs-heading-anchor" href="#Tutorial-1">Tutorial</a><a class="docs-heading-anchor-permalink" href="#Tutorial-1" title="Permalink"></a></h2><p>As a short example, suppose we wanted to implement a vector of regime-switching parameters. Each parameter has 3 regimes, and they are fixed in regime 2 only. The following code snippet will set up the parameter vector as desired. The comments provide additional information on functionality.</p><pre><code class="language-none"># Create initial parameter vector
pvec = ParameterVector{Float64}(undef, 2)
p1 = parameter(:p1, 1., (0., 5.), (0., 5.), ModelConstructors.SquareRoot(); fixed = false)
p2 = parameter(:p2, 1., (0., 10.), (0., 10.), ModelConstructors.SquareRoot(); fixed = false)

pvec[1] = p1
pvec[2] = p2

# Set regime values
set_regime_val!(p1, 1, 1.) # If you use fixed = true, then you&#39;ll need to add the kwarg `override_bounds = true`
set_regime_val!(p1, 2, 2.) # b/c fixed = true sets the `valuebounds` to a zero-length interval (e.g. Interval(1., 1.))
set_regime_val!(p1, 3, 3.) # so toggling b/n regimes will resort in valuebounds errors.

set_regime_val!(p2, 1, 3.) # Also note that you don&#39;t have to use the same values as the ones you used
set_regime_val!(p2, 2, 4.) # during instantiation when setting the regimes. Just make sure the regimes
set_regime_val!(p2, 3, 5.) # are added in linear order

# Specify which regimes are fixed
# Note that, under the hood, `set_regime_fixed!` will
# automatically implement regime-switching valuebounds
# b/c we fix parameters by checking the valuebounds
for p in pvec
    set_regime_fixed!(p, 1, false)
    set_regime_fixed!(p, 2, true)
    set_regime_fixed!(p, 3, false)
end

# Toggle regimes as desired!
# You can toggle the parameter vector directly
# or each parameter instance individually
toggle_regime!(pvec, 1)</code></pre><p>Now, suppose that the notion of &quot;parameter&quot; regimes does not necessarily coincide with the notion of &quot;model&quot; regimes. As an example, in a linear state space model, the state transition or measurement equations might change, even though the parameters remain the same. In this case, we need some way of specifying the relationship between model and parameter regimes.</p><p>To specify this relationship, we utilize an <code>AbstractDict{Int, Int}</code> whose keys are the regimes of the model and values are the regimes of the parameters. When toggling between regimes, the user uses the syntax</p><pre><code class="language-none">toggle_regime!(p::Parameter, model_regime::Int, d::AbstractDict{Int, Int})</code></pre><p>instead of</p><pre><code class="language-none">toggle_regime!(p::Parameter, para_regime::Int)</code></pre><p>For example, suppose that the model has 5 regimes, where regimes 1-3 match the parameter regimes, and regimes 4-6 have the same parameters as regime 1. We can implement such a specification as follows:</p><pre><code class="language-none"># Construct dictionary mapping model regimes to parameter regimes
model2para_regimes = Dict(1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3,
                          4 =&gt; 1, 5 =&gt; 1, 6 =&gt; 1)

# Toggle to parameter regime
# associated with model regime 3
toggle_regime!(pvec, 3, model2para_regimes)

# Now toggle to parameter regime
# associated with model regime 5
toggle_regime!(pvec, 5, model2para_regimes)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../implementation_details/">« Implementation Details</a><a class="docs-footer-nextpage" href="../contributing/">Contributing to ModelConstructors.jl »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 20 August 2021 16:33">Friday 20 August 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
